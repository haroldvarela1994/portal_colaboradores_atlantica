{% extends 'base.html' %}

{% block t√≠tulo %}Crear Nuevo Usuario{% endblock %}

{% block bienvenida %}
  <h1><i class="fas fa-user-plus"></i> Crear Nuevo Usuario</h1>
{% endblock %}

{% block head %}
  {{ super() }}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/user.css') }}">
{% endblock %}

{% block contenido %}
<section class="card full-span">
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ category }}">
          {{ message }}
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <form class="form-usuario" action="{{ url_for('crear_usuario') }}" method="post" enctype="multipart/form-data">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

    <div class="form-grid">
      <div class="form-group">
        <label for="numero_id">N√∫mero de C√©dula*</label>
        <input type="text" id="numero_id" name="numero_id" required>
      </div>

      <div class="form-group">
        <label for="nombres_usuario">Nombres*</label>
        <input type="text" id="nombres_usuario" name="nombres_usuario" required>
      </div>

      <div class="form-group">
        <label for="apellidos_usuario">Apellidos*</label>
        <input type="text" id="apellidos_usuario" name="apellidos_usuario" required>
      </div>

      <div class="form-group">
        <label for="email">Email*</label>
        <input type="email" id="email" name="email" required>
      </div>

      <div class="form-group">
        <label for="clave">Contrase√±a*</label>
        <input type="password" id="clave" name="clave" required minlength="6">
      </div>

      <div class="form-group">
        <label for="rol_id">Rol*</label>
        <select id="rol_id" name="rol_id" required>
          {% for rol in roles %}
            <option value="{{ rol.id_rol }}" {% if rol.id_rol == 5 %}selected{% endif %}>{{ rol.rol }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="form-group">
        <label for="estado_id">Estado*</label>
        <select id="estado_id" name="estado_id" required>
          {% for estado in estados %}
            <option value="{{ estado.id_estado }}">{{ estado.estado }}</option>
          {% endfor %}
        </select>
      </div>
    </div>

    <!-- Campos adicionales -->
    <div class="form-group">
      <label for="direccion">Direcci√≥n</label>
      <input type="text" id="direccion" name="direccion">
    </div>

    <div class="form-group">
      <label for="telefono">Tel√©fono</label>
      <input type="tel" id="telefono" name="telefono">
    </div>

    <div class="form-group">
      <label for="fecha_nacimiento">Fecha Nacimiento</label>
      <input type="date" id="fecha_nacimiento" name="fecha_nacimiento">
    </div>

    <div class="form-group">
      <label for="foto">Foto de Perfil</label>
      <input type="file" id="foto" name="foto" accept="image/*">
    </div>

    <!-- Botones CORREGIDOS -->
    <div class="form-actions">
      <button type="submit" class="quick-button">üìù üë§ Crear Usuario</button>
      <button href="{{ url_for('gestion_usuarios') }}" class="quick-button">‚ùå Cancelar</button>
    </div>

    <small class="form-note">* Campos obligatorios</small>
  </form>
</section>
{% endblock %}