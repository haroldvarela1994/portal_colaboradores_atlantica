{% extends 'base.html' %}

{% block t√≠tulo %}Modificar Noticia{% endblock %}

{% block bienvenida %}
  <h1><i class="fas fa-edit"></i> Modificar Noticia</h1>
{% endblock %}

{% block contenido %}
<section class="card full-span">
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ category }}">
          {{ message }}
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <form class="form-noticia" action="{{ url_for('modificar_noticia', noticia_id=noticia.id_noticias) }}" method="post" enctype="multipart/form-data">
    <!-- TOKEN CSRF -->
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    
    <div class="form-grid">
      <div class="form-group full-width">
        <label for="titulo">T√≠tulo*</label>
        <input type="text" id="titulo" name="titulo" value="{{ noticia.titulo }}" required>
      </div>

      <div class="form-group full-width">
        <label for="contexto">Contenido*</label>
        <textarea id="contexto" name="contexto" rows="6" required>{{ noticia.contexto }}</textarea>
      </div>

      <div class="form-group">
        <label for="imagen">Imagen</label>
        <input type="file" id="imagen" name="imagen" accept="image/*">
        <small>Formatos permitidos: PNG, JPG, JPEG, GIF</small>
        {% if noticia.imagen %}
          <div class="current-image">
            <p>Imagen actual:</p>
            <img src="{{ url_for('static', filename='uploads/' + noticia.imagen) }}" alt="Imagen actual" style="max-width: 200px;">
          </div>
        {% endif %}
      </div>
    </div>

    <div class="form-actions">
      <button type="submit" class="quick-button">üíæ Guardar Cambios</button>
      <button href="{{ url_for('ver_noticias') }}" class="quick-button secondary">‚ùå Cancelar</button>
    </div>
    
    <small class="form-note">* Campos obligatorios</small>
  </form>
</section>
{% endblock %}
